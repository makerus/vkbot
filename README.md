# vkbot

### Расширяемый бот для Вконтакте
Пустой бот без команд, с возможность 
добавить команды самостоятельно через 
специальный псевдо-интерфейс команд, описаный ниже.


### Как запустить бота?
- Указать в файле ```config.php```: *id приложения*, *номер телефона / почту*, *пароль*
- Запустить файл ```app.py```

### Как сделать свою команду?
- Формируем объект команды, переменную в формате словаря, например: ```cmd = {}```
- Формируем функцию с 2 обязательными (*messages*, *api*) параметрами и 1 дополнительным (*params*)
- Два обязательных параметра: *message* - объект сообщения, *api* - объект бота
- Один дополнительный *params* - дополнительные входные данные из команды - тип: **массив**.
- В функции возвращаем строку, которую нужно отправить в ответ на комманду.
- Дополнительный параметр нужен, если ваша команда имеет дополнительные данные для команды
- Обработка этих данных лежит на вас, все они приходят в параметр - *params*
- Добавляем в наш словарь, например ```cmd = {}``` , до этого созданный, 2 обязательных ключа
- Два обязательных ключа: ```{ 'name' : 'наименование команды', 'run': 'наименовании функции обработчика' }```

Небольшой пример, как выглядит команда:
```python

#команда /скажи <фраза> 
#возвращает фразу которую надо отправить
#Формируем объект команды
cmd = {}
"""
Формируем функцию
params - массив [arg1, arg2, arg3]
где arg1, arg2, arg3, это входные данные строки
Например:
/скажи привет мир
В этой команде "привет" и "мир" - входные данные,
где arg1 = привет, arg2 = мир
поэтому params = ["привет", "мир"]
""
def speak(messages, api, params):
    
    user_id = messages['user_id']
    user = api.get_user(user_id)
    phrase = str(" ".join(params))
    message_out = str(user['first_name']) + ", " + phrase
    return message_out
    
#Формируем наш итоговый объект команды
cmd.update({'name': '/скажи', 'run': speak})
```

### Как подключить команду к боту?
- Подключаем скрипт c командой
- В переменную *commands*, через запятую указать ее

```python
from commands.speak import cmd as speak
from commands.test_cmd import cmd as test
commands = [speak, test]

...

bot.listen(last_messages, commands)
```

### Автор проекта
- Ссылка на [профиль ВК](https://vk.com/egor_katagarov)
