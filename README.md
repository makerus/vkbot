# vkbot

### Расширяемый бот для Вконтакте
Пустой бот без команд, с возможность 
добавить команды самостоятельно через 
специальный псевдо-интерфейс команд, описаный ниже.


### Как запустить бота?
- Указать в файле ```config_example.py```: *id приложения*, *номер телефона / почту*, *пароль*
- Переименовать файл ```config_example.py``` в ```config.py```
- Запустить файл ```app.py```

### Как сделать свою команду?
- Формируем объект команды, переменную в формате словаря, например: ```cmd = {}```
- Формируем функцию с 2 обязательными (*messages*, *api*) параметрами и 1 дополнительным (*params*)
- Два обязательных параметра: *message* - объект сообщения, *api* - объект бота
- Один дополнительный *params* - дополнительные входные данные из команды - тип: **массив**.
- В функции возвращаем строку, которую нужно отправить в ответ на комманду.
- Дополнительный параметр нужен, если ваша команда имеет дополнительные данные для команды
- Обработка этих данных лежит на вас, все они приходят в параметр - *params*
- Добавляем в наш словарь, например ```cmd = {}``` , до этого созданный, 2 обязательных ключа
- Два обязательных ключа: ```{ 'name' : 'наименование команды', 'run': 'наименовании функции обработчика' }```

Небольшой пример, как выглядит команда лежит в ``commands/speak.py``

### Как подключить команду к боту?
- Подключаем скрипт c командой
- В массив *commands*, через запятую указать ее

```python
from commands.speak import cmd as speak
from commands.test_cmd import cmd as test
commands = [speak, test]

...

bot.listen(last_messages, commands)
```

### [Обновление] Обработчики
Были добавлены в ядро, функциональность обработчиков.
Для чего они нужны? Обработчики занимаются обработкой каждого сообщения, вне зависимости от того:
есть ли там команда или нет, то есть, обрабатывают все **НЕПРОЧИТАННЫЕ** сообщения подряд.

Пример такого обработчика лежит в ``middleware/read_messages.py``

### Как подключить обработчик?
- Подключаем скрипт c обработчиком
- В массив *middlewares*, через запятую указать его

```python
from middleware.read_messages import read_messages
middlewares = [read_messages]

...

bot.listen(last_messages, commands, middlewares)
```


### Автор проекта
- Ссылка на [профиль ВК](https://vk.com/egor_katagarov)
